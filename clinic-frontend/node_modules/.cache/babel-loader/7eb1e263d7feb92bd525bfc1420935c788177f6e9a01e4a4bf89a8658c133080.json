{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"h1\", null, \"Dashboard\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: $setup.logout\n  }, \"Logout\"), _cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"Appointments\", -1 /* CACHED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.appointments, appointment => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: appointment.id\n    }, [_createTextVNode(_toDisplayString(appointment.title) + \" - \" + _toDisplayString(appointment.date) + \" \", 1 /* TEXT */), _createElementVNode(\"button\", {\n      onClick: $event => $setup.deleteAppointment(appointment.id)\n    }, \"Delete\", 8 /* PROPS */, _hoisted_1)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.createAppointment, [\"prevent\"])\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.newTitle = $event),\n    placeholder: \"Title\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newTitle]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.newDate = $event),\n    type: \"date\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.newDate]]), _cache[2] || (_cache[2] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Add\", -1 /* CACHED */))], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","onClick","$setup","logout","_Fragment","_renderList","appointments","appointment","key","id","title","_toDisplayString","date","$event","deleteAppointment","_hoisted_1","onSubmit","_withModifiers","createAppointment","newTitle","placeholder","required","newDate","type"],"sources":["D:\\webapp\\project\\clinic-frontend\\src\\views\\DashboardPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>Dashboard</h1>\r\n    <button @click=\"logout\">Logout</button>\r\n\r\n    <h2>Appointments</h2>\r\n    <ul>\r\n      <li v-for=\"appointment in appointments\" :key=\"appointment.id\">\r\n        {{ appointment.title }} - {{ appointment.date }}\r\n        <button @click=\"deleteAppointment(appointment.id)\">Delete</button>\r\n      </li>\r\n    </ul>\r\n    <form @submit.prevent=\"createAppointment\">\r\n      <input v-model=\"newTitle\" placeholder=\"Title\" required />\r\n      <input v-model=\"newDate\" type=\"date\" required />\r\n      <button type=\"submit\">Add</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport router from '../router'\r\n\r\nconst appointments = ref([])\r\nconst newTitle = ref('')\r\nconst newDate = ref('')\r\n\r\nconst token = localStorage.getItem('token')\r\n\r\nif (!token) router.push('/login')\r\n\r\naxios.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n\r\nconst fetchAppointments = async () => {\r\n  const res = await axios.get('http://127.0.0.1:8000/appointments')\r\n  appointments.value = res.data\r\n}\r\n\r\nconst createAppointment = async () => {\r\n  const res = await axios.post('http://127.0.0.1:8000/appointments/', {\r\n    title: newTitle.value,\r\n    date: newDate.value\r\n  })\r\n  appointments.value.push(res.data)\r\n  newTitle.value = ''\r\n  newDate.value = ''\r\n}\r\n\r\nconst deleteAppointment = async (id) => {\r\n  await axios.delete(`http://127.0.0.1:8000/appointments/${id}`)\r\n  appointments.value = appointments.value.filter(a => a.id !== id)\r\n}\r\n\r\nconst logout = () => {\r\n  localStorage.removeItem('token')\r\n  router.push('/login')\r\n}\r\n\r\nonMounted(() => {\r\n  fetchAppointments()\r\n})\r\n</script>\r\n"],"mappings":";;;uBACEA,mBAAA,CAgBM,c,0BAfJC,mBAAA,CAAkB,YAAd,WAAS,qBACbA,mBAAA,CAAuC;IAA9BC,OAAK,EAAEC,MAAA,CAAAC;EAAM,GAAE,QAAM,G,0BAE9BH,mBAAA,CAAqB,YAAjB,cAAY,qBAChBA,mBAAA,CAKK,c,kBAJHD,mBAAA,CAGKK,SAAA,QAAAC,WAAA,CAHqBH,MAAA,CAAAI,YAAY,EAA3BC,WAAW;yBAAtBR,mBAAA,CAGK;MAHoCS,GAAG,EAAED,WAAW,CAACE;0CACrDF,WAAW,CAACG,KAAK,IAAG,KAAG,GAAAC,gBAAA,CAAGJ,WAAW,CAACK,IAAI,IAAG,GAChD,iBAAAZ,mBAAA,CAAkE;MAAzDC,OAAK,EAAAY,MAAA,IAAEX,MAAA,CAAAY,iBAAiB,CAACP,WAAW,CAACE,EAAE;OAAG,QAAM,iBAAAM,UAAA,E;oCAG7Df,mBAAA,CAIO;IAJAgB,QAAM,EAAAC,cAAA,CAAUf,MAAA,CAAAgB,iBAAiB;sBACtClB,mBAAA,CAAyD;+DAAzCE,MAAA,CAAAiB,QAAQ,GAAAN,MAAA;IAAEO,WAAW,EAAC,OAAO;IAACC,QAAQ,EAAR;iDAA9BnB,MAAA,CAAAiB,QAAQ,E,mBACxBnB,mBAAA,CAAgD;+DAAhCE,MAAA,CAAAoB,OAAO,GAAAT,MAAA;IAAEU,IAAI,EAAC,MAAM;IAACF,QAAQ,EAAR;iDAArBnB,MAAA,CAAAoB,OAAO,E,6BACvBtB,mBAAA,CAAkC;IAA1BuB,IAAI,EAAC;EAAQ,GAAC,KAAG,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}