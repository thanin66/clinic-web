(()=>{"use strict";var e={195:(e,o,t)=>{var r=t(751),n=t(641);function a(e,o,t,r,a,s){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(l)}const s={name:"App",components:{}};var l=t(262);const i=(0,l.A)(s,[["render",a]]),u=i;var d=t(220),c=t(33);const p={key:0};function h(e,o,t,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[o[4]||(o[4]=(0,n.Lk)("h1",null,"Login",-1)),(0,n.Lk)("form",{onSubmit:o[2]||(o[2]=(0,r.D$)((...e)=>l.login&&l.login(...e),["prevent"]))},[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.username=e),placeholder:"Username"},null,512),[[r.Jo,s.username]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.password=e),type:"password",placeholder:"Password"},null,512),[[r.Jo,s.password]]),o[3]||(o[3]=(0,n.Lk)("button",{type:"submit"},"Login",-1))],32),s.error?((0,n.uX)(),(0,n.CE)("p",p,(0,c.v_)(s.error),1)):(0,n.Q3)("",!0)])}var m=t(335);const g=m.A.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"}}),f=e=>{e?g.defaults.headers.common["Authorization"]=`Bearer ${e}`:delete g.defaults.headers.common["Authorization"]},b=g,v={data(){return{username:"",password:"",error:""}},methods:{async login(){try{const e=await b.post("/auth/login",{username:this.username,password:this.password}),o=e.data.access_token;localStorage.setItem("token",o),f(o),this.$router.push("/dashboard")}catch(e){this.error="Login failed",console.error(e)}}}},w=(0,l.A)(v,[["render",h]]),y=w;function k(e,o,t,r,a,s){return(0,n.uX)(),(0,n.CE)("div",null,[o[1]||(o[1]=(0,n.Lk)("h1",null,"Dashboard",-1)),(0,n.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>s.logout&&s.logout(...e))},"Logout")])}const L={methods:{logout(){localStorage.removeItem("token"),f(null),this.$router.push("/login")}},created(){const e=localStorage.getItem("token");e&&f(e)}},O=(0,l.A)(L,[["render",k]]),A=O;function S(e,o,t,a,s,l){return(0,n.uX)(),(0,n.CE)("div",null,[o[3]||(o[3]=(0,n.Lk)("h1",null,"Register",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.email=e),placeholder:"Email"},null,512),[[r.Jo,s.email]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.password=e),type:"password",placeholder:"Password"},null,512),[[r.Jo,s.password]]),(0,n.Lk)("button",{onClick:o[2]||(o[2]=(...e)=>l.register&&l.register(...e))},"Register")])}const j={data(){return{email:"",password:""}},methods:{async register(){try{await b.post("/users/register",{email:this.email,password:this.password});alert("Registered successfully!"),this.$router.push("/login")}catch(e){alert(e.response?.data?.detail||"Register failed")}}}},C=(0,l.A)(j,[["render",S]]),E=C,P=[{path:"/",redirect:"/login"},{path:"/login",component:y},{path:"/register",component:E},{path:"/dashboard",component:A,meta:{requiresAuth:!0}}],U=(0,d.aE)({history:(0,d.LA)(),routes:P});U.beforeEach((e,o,t)=>{const r=localStorage.getItem("token");e.meta.requiresAuth&&!r?t("/login"):t()});const _=U,R=(0,r.Ef)(u);R.use(_),R.mount("#app")}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var a=o[r]={exports:{}};return e[r](a,a.exports,t),a.exports}t.m=e,(()=>{var e=[];t.O=(o,r,n,a)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,n,a]=e[d],l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(t.O).every(e=>t.O[e](r[i]))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var u=n();void 0!==u&&(o=u)}}return o}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]}})(),(()=>{t.d=(e,o)=>{for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};t.O.j=o=>0===e[o];var o=(o,r)=>{var n,a,[s,l,i]=r,u=0;if(s.some(o=>0!==e[o])){for(n in l)t.o(l,n)&&(t.m[n]=l[n]);if(i)var d=i(t)}for(o&&o(r);u<s.length;u++)a=s[u],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},r=self["webpackChunkclinic_frontend"]=self["webpackChunkclinic_frontend"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))})();var r=t.O(void 0,[504],()=>t(195));r=t.O(r)})();
//# sourceMappingURL=app.7ed33bf9.js.map